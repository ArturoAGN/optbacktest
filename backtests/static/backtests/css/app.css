/* ==================== Tema (Dark por defecto) ==================== */
:root{
  --bg-body: #0b1020;
  --bg-panel: #0f172a;
  --fg: #e5e7eb;
  --muted: #94a3b8;
  --border: #1f2937;
  --grid: #334155;

  --accent: #60a5fa;
  --success: #34d399;
  --danger: #f87171;

  --pm-fill: rgba(59,130,246,0.20);
  --ah-fill: rgba(16,185,129,0.22);

  --cell-h: 380px;            /* alto de cada celda de gráfico */
  --gap: 1rem;
  --panel-radius: 10px;

  /* Alturas UI “superior” (3 columnas) */
  --ops-panel-h: 485px;       /* ← altura uniforme de Izq / Centro / Der */
  --table-h: 200px;           /* altura por defecto de scrollers de tabla (fuera de tabs) */
}

html, body { height: 100%; }
body { margin: 0; background: var(--bg-body); color: var(--fg); }
.container { width: 100%; max-width: 100%; margin: 0; padding: .75rem 1rem; }

/* --------- Encabezados discretos de sección --------- */
.section-head{
  display:flex; align-items:center; justify-content:space-between;
  padding:.35rem .5rem; margin:-.25rem -.25rem .5rem -.25rem;
  border-bottom:1px dashed var(--border);
}
.section-title{
  font-size:.78rem; color:var(--muted); font-weight:700; letter-spacing:.04em; text-transform:uppercase;
}
.section-actions{ display:flex; gap:.5rem; }

/* ==================== CONTENEDOR ÚNICO (3 columnas) ==================== */
.combo-card{
  border: 1px solid var(--border);
  border-radius: 10px;
  background: var(--bg-panel);
  padding: .6rem .75rem;
  margin-bottom: .9rem;
}
.combo-grid{
  display:grid;
  gap: .9rem;
  align-items: stretch;        /* todas las columnas estiran a la MISMA altura */
  grid-template-columns: 1fr 1fr 1fr;   /* 3 columnas iguales */
}
@media (max-width: 1200px){ .combo-grid{ grid-template-columns: 1fr 1fr; } }
@media (max-width: 840px){  .combo-grid{ grid-template-columns: 1fr; } }

/* === Altura uniforme de las 3 columnas y manejo de overflow interno === */
.col-left,
.col-mid,
.col-right{ height: var(--ops-panel-h); min-height: 0; }

.col-mid .tool,
.col-right .tabs-tool{
  height: 100%;
  display:flex; flex-direction:column; min-height:0; overflow:hidden;
}

/* Columna izquierda: dos secciones apiladas sin crecer el padre */
.col-left{ display:flex; flex-direction:column; gap:.9rem; overflow:hidden; }
.col-left .tool{ flex:1 1 0; min-height:0; overflow:auto; }

/* Cards generales (“tool”) */
.tool{
  border:1px solid var(--border);
  border-radius:10px;
  background: var(--bg-panel);
  padding:.5rem .6rem;
}

/* -------- Formulario compacto -------- */
.form-row{
  display: grid;
  grid-template-columns: repeat(4, max-content); /* Ticker | Desde | Hasta | Botón */
  align-items: end;
  gap: .5rem .75rem;
}
.form-row label{ margin: 0; }
.form-row label > span.lbl, .form-row label > span{
  display:block; margin-bottom:.15rem; color: var(--muted); font-size:.78rem;
}

/* Inputs compactos */
.input-compact{
  font-size: .85rem !important;
  padding: .25rem .5rem !important;
  height: 32px !important;
  line-height: 1.2 !important;
}
.input-ticker{ width: 110px; }
.input-date{ width: 135px; }

/* Date picker */
input[type="date"]{
  -webkit-appearance: auto;
  appearance: auto;
  background-image: none !important;
  background-color: var(--bg-panel);
  color: var(--fg);
  border: 1px solid var(--border);
  padding-right: 2rem !important;
  pointer-events: auto;
}
input[type="date"]::-webkit-calendar-picker-indicator{
  opacity: 1; cursor: pointer; width: 18px; height: 18px; margin-right: .25rem;
}
input[type="date"]::-webkit-inner-spin-button{ display: none; }

/* Botones */
.btn-compact{
  align-self: end;
  height: 32px;
  padding: 0 .65rem;
  font-size: .82rem;
  display: inline-flex; align-items: center; justify-content: center;
  line-height: 1;
  border:1px solid var(--border);
  background: var(--bg-panel); color: var(--fg);
  border-radius: 8px;
}
.btn-xs{
  height: 26px !important;
  padding: 0 .5rem !important;
  font-size: .75rem !important;
  line-height: 1 !important;
  border-radius: 6px !important;
}

/* -------- Controles y estado -------- */
.bt-controls{ display:flex; flex-wrap:wrap; gap:.4rem; align-items:center; }
.bt-controls button, .bt-controls select, .bt-controls input{
  height:32px; font-size:.82rem; padding:.2rem .55rem; border:1px solid var(--border); background:#0b142a; color:var(--fg); border-radius:6px;
}
.bt-status{
  display:flex; flex-wrap:wrap; gap:.6rem; align-items:center;
  font-size:.88rem; color:var(--fg); margin-top:.45rem;
}
.bt-status--compact{ font-size:.84rem; }
.pill{ background:#0b142a; padding:.2rem .5rem; border-radius:999px; border:1px solid var(--border); }
.pnl-positive{ color:var(--success); font-weight:600; }
.pnl-negative{ color:var(--danger); font-weight:600; }

/* -------- Órdenes y parámetros -------- */
.row{ display:flex; gap:.5rem; align-items:end; flex-wrap:wrap; }
.tool label span{ display:block; font-size:.78rem; color:var(--muted); margin-bottom:.15rem; }
.tool input, .tool select{ height:32px; font-size:.85rem; padding:.25rem .5rem; border:1px solid var(--border); background:#0b142a; color:var(--fg); border-radius:6px; }
.ops-right{ display:flex; flex-direction:column; gap:.25rem; justify-content:center; }

/* ====== Tabs (Órdenes/Trades) ====== */
.tabs-tool{ display:flex; flex-direction:column; height:100%; min-height:0; }
.tabbar{
  display:flex; gap:.4rem; align-items:center; justify-content:flex-start; /* ← tabs juntos al lado izquierdo */
  padding:.25rem .5rem; margin:-.25rem -.25rem .5rem -.25rem;
  border-bottom:1px dashed var(--border);
}
.tab-btn{
  height:28px; padding:0 .6rem; font-size:.78rem;
  border:1px solid var(--border); background:#0b142a; color:var(--fg);
  border-radius:6px; cursor:pointer;
}
.tab-btn.active{ background:var(--bg-body); }
.tab-panels{ flex:1 1 auto; min-height:0; display:block; }
.tab-panel{ display:none; height:100%; }
.tab-panel.active{ display:flex; flex-direction:column; height:100%; }

/* Dentro de tabs, la tabla ocupa el espacio disponible y hace scroll; el padre NO crece */
.tab-panel .table-scroller{
  flex:1 1 auto; min-height:0; height:auto;
  overflow:auto; border:1px solid var(--border); border-radius:8px;
}

/* ====== Estilo general de scrollers de tabla (fuera de tabs) ====== */
.table-scroller{
  height: var(--table-h);
  overflow: auto;
  border:1px solid var(--border);
  border-radius:8px;
}
.table-scroller table{ width:100%; min-width: 900px; border-collapse:collapse; font-size:12px; color:var(--fg); }
.table-scroller th, .table-scroller td{
  border-bottom:1px solid var(--border); padding:.35rem .4rem; white-space:nowrap; text-align:left;
}
.table-scroller thead th{
  position:sticky; top:0; z-index:1; background:var(--bg-panel); border-bottom:1px solid var(--border);
}

/* -------- Layout principal 70/30 para gráficos/cadena -------- */
.layout{
  display: grid;
  grid-template-columns: 70% 30%;
  gap: 1rem; align-items: start; width: 100%;
}
@media (max-width: 1100px){ .layout{ grid-template-columns: 1fr; } }

.grid-2{
  display: grid; grid-template-columns: 1fr 1fr; grid-auto-rows: var(--cell-h); gap: var(--gap);
}
@media (max-width:980px){ .grid-2{ grid-template-columns:1fr; grid-auto-rows:360px; } }

.panel{
  border:1px solid var(--border); border-radius: var(--panel-radius); background:var(--bg-panel);
  padding:.5rem; overflow:hidden;
}
.panel .chart{ width:100%; height:100%; }

.panel.placeholder{
  border:2px dashed var(--border);
  background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(255,255,255,0.02) 10px,rgba(255,255,255,0.02) 20px);
  display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:600;
  text-align:center; padding:1rem;
}

/* Cadena de opciones (columna derecha de gráficos) */
.chain-container{
  border:1px solid var(--border); border-radius: var(--panel-radius); background:var(--bg-panel);
  display:flex; flex-direction:column;
  height: calc(var(--cell-h) * 2 + var(--gap));
  overflow:hidden;
}
.chain-header{ background:#0b142a; }
.chain-body{ overflow:auto; padding:.5rem .6rem; }
.chain-body table{ width:100%; border-collapse:collapse; font-size:12px; color:var(--fg); }
.chain-body th, .chain-body td{ border-bottom:1px solid var(--border); padding:.35rem .4rem; white-space:nowrap; text-align:left; }
.chain-body thead th{ position:sticky; top:0; z-index:1; background:var(--bg-panel); border-bottom:1px solid var(--border); }
.chain-body td code{ font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }

/* (Panel4 toggle desactivado por ahora) */
.panel4-toggle{ display:none; }
.muted{ color:var(--muted); font-size:.88rem; }
.btn-compact-table{ padding:.25rem .45rem; font-size:.8rem; border:1px solid var(--border); background:#0b142a; color:var(--fg); border-radius:6px; }
