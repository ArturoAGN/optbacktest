:root{
  --cell-h: 380px;
  --gap: 1rem;
  --panel-radius: 10px;
  --border: #e5e7eb;
  --muted: #6b7280;
}

html, body { height: 100%; }
body { margin: 0; }
.container { width: 100%; max-width: 100%; margin: 0; padding: .75rem 1rem; }

/* -------- Formulario compacto -------- */
.form-card{
  border: 1px solid var(--border);
  border-radius: 10px;
  background: #fff;
  padding: .55rem .75rem;
  margin-bottom: .75rem;
}
.form-row{
  display: grid;
  grid-template-columns: repeat(4, max-content); /* Ticker | Desde | Hasta | Botón */
  align-items: end;
  gap: .5rem .75rem;
}
.form-row label{ margin: 0; }
.form-row label > span.lbl, .form-row label > span{
  display:block; margin-bottom:.15rem; color: var(--muted); font-size:.78rem;
}

/* Inputs compactos */
.input-compact{
  font-size: .85rem !important;
  padding: .25rem .5rem !important;
  height: 32px !important;
  line-height: 1.2 !important;
}
.input-ticker{ width: 110px; }
.input-date{ width: 135px; }

/* Date picker: dejar solo icono nativo y que no se corte */
input[type="date"]{
  -webkit-appearance: auto;
  appearance: auto;
  background-image: none !important;
  background-color: #fff;
  padding-right: 2rem !important;
  pointer-events: auto;
}
input[type="date"]::-webkit-calendar-picker-indicator{
  opacity: 1;
  cursor: pointer;
  width: 18px;
  height: 18px;
  margin-right: .25rem;
}
input[type="date"]::-webkit-inner-spin-button{ display: none; }

/* Botón compacto centrado */
.btn-compact{
  align-self: end;
  height: 32px;
  padding: 0 .75rem;
  font-size: .85rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

/* -------- Layout principal 70/30 -------- */
.layout{
  display: grid;
  grid-template-columns: 70% 30%;
  gap: 1rem; align-items: start; width: 100%;
}
@media (max-width: 1100px){ .layout{ grid-template-columns: 1fr; } }

.grid-2{
  display: grid; grid-template-columns: 1fr 1fr; grid-auto-rows: var(--cell-h); gap: var(--gap);
}
@media (max-width:980px){ .grid-2{ grid-template-columns:1fr; grid-auto-rows:360px; } }

.panel{
  border:1px solid var(--border); border-radius: var(--panel-radius); background:#fff;
  padding:.5rem; overflow:hidden;
}
.panel .chart{ width:100%; height:100%; }

.panel.placeholder{
  border:2px dashed #cbd5e1;
  background:repeating-linear-gradient(45deg,#fafafa,#fafafa 10px,#fdfdfd 10px,#fdfdfd 20px);
  display:flex; align-items:center; justify-content:center; color:var(--muted); font-weight:600;
  text-align:center; padding:1rem;
}

/* Cadena de opciones */
.chain-container{
  border:1px solid var(--border); border-radius: var(--panel-radius); background:#fff;
  display:flex; flex-direction:column;
  height: calc(var(--cell-h) * 2 + var(--gap));
  overflow:hidden;
}
.chain-header{ padding:.6rem .8rem; border-bottom:1px solid var(--border); font-weight:600; font-size:.9rem; background:#fafafa; }
.chain-body{ overflow:auto; padding:.5rem .6rem; }
.chain-body table{ width:100%; border-collapse:collapse; font-size:12px; }
.chain-body th, .chain-body td{ border-bottom:1px solid #f1f5f9; padding:.35rem .4rem; white-space:nowrap; text-align:left; }
.chain-body thead th{ position:sticky; top:0; z-index:1; background:#f8fafc; border-bottom:1px solid #e2e8f0; }
.chain-body td code{ font-family: ui-monospace, SFMono-Regular, Menlo, monospace; }

.muted{ color:var(--muted); font-size:.88rem; }
.btn-compact-table{ padding:.25rem .45rem; font-size:.8rem; }

/* Toolbar Backtesting + P&L */
.bt-toolbar{
  display:grid; grid-template-columns: 1fr 1fr; gap:.75rem;
  border:1px solid var(--border); border-radius:10px; background:#fff; padding:.5rem .75rem; margin-bottom:.75rem;
}
.bt-controls{ display:flex; flex-wrap:wrap; gap:.4rem; align-items:center; }
.bt-controls button, .bt-controls select, .bt-controls input{ height:32px; font-size:.85rem; padding:.25rem .6rem; }
.bt-status{
  display:flex; flex-wrap:wrap; gap:.75rem; justify-content:flex-end; align-items:center;
  font-size:.9rem; color:#334155;
}
.pill{ background:#f1f5f9; padding:.2rem .5rem; border-radius:999px; }
.pnl-positive{ color:#15803d; font-weight:600; }
.pnl-negative{ color:#b91c1c; font-weight:600; }

.bt-ops{
  display:grid; grid-template-columns: 1fr 1fr; gap:.75rem;
  border:1px solid var(--border); border-radius:10px; background:#fff; padding:.6rem .75rem; margin-bottom:.75rem;
}
.bt-ops .row{ display:flex; gap:.5rem; align-items:end; flex-wrap:wrap; }
.bt-ops label span{ display:block; font-size:.78rem; color:var(--muted); margin-bottom:.15rem; }
.bt-ops input, .bt-ops select{ height:32px; font-size:.85rem; padding:.25rem .5rem; }
.ops-right{ display:flex; flex-direction:column; gap:.25rem; justify-content:center; }

/* Secciones de órdenes/trades */
.section-card{
  border:1px solid var(--border); border-radius:10px; background:#fff; padding:.6rem .75rem; margin-top:.75rem;
}
.table-wrap{ overflow:auto; }
.section-card table{ width:100%; border-collapse:collapse; font-size:12px; }
.section-card th, .section-card td{ border-bottom:1px solid #f1f5f9; padding:.35rem .4rem; white-space:nowrap; text-align:left; }
.section-card thead th{ position:sticky; top:0; z-index:1; background:#f8fafc; border-bottom:1px solid #e2e8f0; }

/* Panel 4 toggle */
.panel4-toggle{
  border:1px solid var(--border); border-radius:10px; background:#fff; padding:.5rem .75rem; margin-bottom:.75rem;
}
.panel4-toggle .row{ display:flex; gap:1rem; align-items:center; flex-wrap:wrap; }
.radio-inline{ display:flex; gap:.35rem; align-items:center; }
